name: Java CI & Deploy to Render on: push: branches: [ main ] pull_request: branches: [ main ] jobs: build-and-deploy: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Set up JDK 21 uses: actions/setup-java@v3 with: java-version: '21' distribution: 'temurin' - name: Make Gradle wrapper executable run: chmod +x gradlew - name: Build with Gradle run: ./gradlew build - name: Run tests with H2 run: ./gradlew test -Dspring.profiles.active=test - name: Set up Docker Buildx uses: docker/setup-buildx-action@v3 - name: Build Docker Image run: docker build -t spring-boot-app . - name: Run Docker Container (optional local test) run: | docker run -d -p 8080:8080 --name app spring-boot-app sleep 10 docker ps -a - name: Deploy to Render env: RENDER_SERVICE_ID: srv-d4imitchg0os73a1q0n0 RENDER_API_KEY: rnd_ghalsEeHnkrNK7NXuQyzRXrPmFBZ run: | curl -X POST https://api.render.com/deploy/$RENDER_SERVICE_ID \ -H "Authorization: Bearer $RENDER_API_KEY" \ -H "Accept: application/json" make it like this but remove the deploy
